import{c as xe,a as w,j as Ee,l as V}from"./mini-scrollbar-CPC470y1.js";import{r as M,R as c}from"./index-D4lIrffr.js";import{u as we,a as je,c as ke}from"./use-taomu-classname-DBKvGVUz.js";import{i as _e,a as Fe,b as Ce}from"./input.styled-CM8kCSTb.js";import{D as Ie}from"./dropdown-D8iQSey3.js";import"./index-hTlR2-m8.js";import{i as Te}from"./global-vars-CoVtkCb5.js";import{P as f}from"./index-B2-v9W4q.js";import{L as ze}from"./loading-M4ERhcex.js";function W(){return W=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},W.apply(this,arguments)}function Pe(e,a){if(e==null)return{};var r=Se(e,a),t,u;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(u=0;u<i.length;u++)t=i[u],!(a.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function Se(e,a){if(e==null)return{};var r={},t=Object.keys(e),u,i;for(i=0;i<t.length;i++)u=t[i],!(a.indexOf(u)>=0)&&(r[u]=e[u]);return r}var A=M.forwardRef(function(e,a){var r=e.color,t=r===void 0?"currentColor":r,u=e.size,i=u===void 0?24:u,h=Pe(e,["color","size"]);return c.createElement("svg",W({ref:a,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},h),c.createElement("polyline",{points:"6 9 12 15 18 9"}))});A.propTypes={color:f.string,size:f.oneOfType([f.string,f.number])};A.displayName="ChevronDown";function $(){return $=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},$.apply(this,arguments)}function qe(e,a){if(e==null)return{};var r=De(e,a),t,u;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(u=0;u<i.length;u++)t=i[u],!(a.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function De(e,a){if(e==null)return{};var r={},t=Object.keys(e),u,i;for(i=0;i<t.length;i++)u=t[i],!(a.indexOf(u)>=0)&&(r[u]=e[u]);return r}var B=M.forwardRef(function(e,a){var r=e.color,t=r===void 0?"currentColor":r,u=e.size,i=u===void 0?24:u,h=qe(e,["color","size"]);return c.createElement("svg",$({ref:a,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},h),c.createElement("polyline",{points:"18 15 12 9 6 15"}))});B.propTypes={color:f.string,size:f.oneOfType([f.string,f.number])};B.displayName="ChevronUp";function R(){return R=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},R.apply(this,arguments)}function Le(e,a){if(e==null)return{};var r=Ve(e,a),t,u;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(u=0;u<i.length;u++)t=i[u],!(a.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function Ve(e,a){if(e==null)return{};var r={},t=Object.keys(e),u,i;for(i=0;i<t.length;i++)u=t[i],!(a.indexOf(u)>=0)&&(r[u]=e[u]);return r}var N=M.forwardRef(function(e,a){var r=e.color,t=r===void 0?"currentColor":r,u=e.size,i=u===void 0?24:u,h=Le(e,["color","size"]);return c.createElement("svg",R({ref:a,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},h),c.createElement("circle",{cx:"11",cy:"11",r:"8"}),c.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}))});N.propTypes={color:f.string,size:f.oneOfType([f.string,f.number])};N.displayName="Search";try{Dropdown.displayName="Dropdown",Dropdown.__docgenInfo={description:"",displayName:"Dropdown",props:{menus:{defaultValue:null,description:"",name:"menus",required:!1,type:{name:"MenuItemProps[]"}},menuProps:{defaultValue:{value:"{}"},description:"",name:"menuProps",required:!1,type:{name:"MenuProps"}},equalWidth:{defaultValue:null,description:"",name:"equalWidth",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"equal"'},{value:'"min-width"'},{value:'"max-width"'}]}},onMenuItemClick:{defaultValue:null,description:"",name:"onMenuItemClick",required:!1,type:{name:"((item: MenuItemProps, index: number, event: MouseEvent<HTMLDivElement, MouseEvent>) => void)"}},children:{defaultValue:null,description:"触发元素",name:"children",required:!0,type:{name:"Element"}},content:{defaultValue:null,description:"弹出内容",name:"content",required:!1,type:{name:"ComponentType<any>"}},contentProps:{defaultValue:{value:"{}"},description:"弹出内容 props 用于更新弹层内部数据",name:"contentProps",required:!1,type:{name:"MenuProps"}},trigger:{defaultValue:{value:"click"},description:"触发条件，默认: click",name:"trigger",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"click"'},{value:'"hover"'}]}},position:{defaultValue:null,description:"弹出位置, 默认为 'bottom-left'",name:"position",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"center"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-bottom"'},{value:'"bottom-center"'},{value:'"bottom-left"'},{value:'"bottom-right"'},{value:'"bottom-top"'},{value:'"center-bottom"'},{value:'"center-center"'},{value:'"center-left"'},{value:'"center-right"'},{value:'"center-top"'},{value:'"left-bottom"'},{value:'"left-center"'},{value:'"left-left"'},{value:'"left-right"'},{value:'"left-top"'},{value:'"right-bottom"'},{value:'"right-center"'},{value:'"right-left"'},{value:'"right-right"'},{value:'"right-top"'},{value:'"top-bottom"'},{value:'"top-center"'},{value:'"top-left"'},{value:'"top-right"'},{value:'"top-top"'},{value:'"dialog-center"'}]}},portalOptions:{defaultValue:{value:"{}"},description:"传送门选项",name:"portalOptions",required:!1,type:{name:"PopupPortalOptions"}},debounceTime:{defaultValue:null,description:"防抖时间, 只在 trigger 为 hover 时生效",name:"debounceTime",required:!1,type:{name:"number"}},dynamic:{defaultValue:null,description:"是否动态更新, 如果存在弹层嵌套,请勿使用",name:"dynamic",required:!1,type:{name:"boolean"}}}}}catch{}Te("common",{});const We=xe`
  cursor: pointer;
  input {
    cursor: pointer;
  }
`,K=c.forwardRef(({className:e,cssVars:a,style:r,status:t="default",allowClear:u,width:i="100%",height:h=32,padding:ee="0 8px",placeholder:te,radius:re,leftNode:ne,rightNode:G,showSearch:d,options:o,loading:ue,defaultOpened:le=!1,openOnFocus:ae,closeOnBlur:ie=!0,dropdownProps:j={},name:oe,labelProp:H="label",valueProp:v="value",filterProp:k="label",value:m,onChange:I,onFocus:T,onBlur:z,onKeyDown:P,...se},ce)=>{const g=c.useRef(null),b=c.useRef(null),[_,S]=c.useState(!1),[x,U]=c.useState(le),[O,F]=c.useState(),[E,J]=c.useState(""),fe=we("select","flex row center-v gap-6",`status-${t}`,{focused:_},e),pe=je({inputWidth:i,inputHeight:h,inputPadding:ee,inputRadius:re,...a},r);c.useImperativeHandle(ce,Q),c.useEffect(()=>{var n,l;_?(n=g.current)==null||n.focus():(l=g.current)==null||l.blur()},[_]),c.useEffect(()=>{var n;if(d){const l=o==null?void 0:o.find(s=>s[v]==m);l&&J(((n=l==null?void 0:l.label)==null?void 0:n.toString())||"")}},[m,d,v]);const y=c.useMemo(()=>{var l;const n=[];if(!(o!=null&&o.length))return n;for(let s=0;s<o.length;s++){const p=o[s];if(d&&E){const C=typeof k=="string"?[k]:k;let Z=!1;for(let L=0;L<C.length;L++){const Oe=C[L];if((l=p[Oe])!=null&&l.includes(E)){Z=!0;break}}if(!Z)continue}n.push({name:(p.name||p[v])??s,active:O===s,...p})}return n},[o,O,E,k]);c.useEffect(()=>{q()},[m,E]);const de=c.useMemo(()=>{if(d)return E;if(m===void 0)return;const n=o==null?void 0:o.find(s=>s[v]==m);return(n==null?void 0:n[H])||m},[m,o,H,v,E,d]);function Q(){return{target:{name:oe,value:m},opened:x,input:g.current,dropdown:b.current,setFocused:S}}function me(n){const l=o==null?void 0:o.findIndex(C=>C.value==n);if(l===void 0||l<0)return;const s=o==null?void 0:o[l];F(l);const p=Q();p.target.value=n,I==null||I(p,s==null?void 0:s[v],s)}function X(n=0){const l=y==null?void 0:y[n<0?0:n];l&&(me(l[v]),D())}function q(){const n=o==null?void 0:o.findIndex(l=>l[v]==m);F(n)}function Y(){var n,l;q(),(n=g.current)!=null&&n.parentElement?(U(!0),(l=b.current)==null||l.openPopup(g.current.parentElement)):console.warn("Select open field: element not found")}function D(){var n;q(),U(!1),(n=b.current)==null||n.closePopup()}function ve(n){S(!0),T==null||T(n),setTimeout(()=>{var l,s;ae&&!x&&!((s=(l=b.current)==null?void 0:l.popupPortal)!=null&&s.isEnter)&&Y()},120)}function ge(n){S(!1),z==null||z(n),ie&&D()}function ye(n){switch(P==null||P(n),n.key){case"Escape":D();break;case"Enter":x?X(O):Y();break;case"ArrowDown":if(x){n.preventDefault();const l=O===void 0?0:(O+1)%y.length;F(l)}break;case"ArrowUp":if(x){n.preventDefault();const l=O===void 0?y.length-1:(O-1+y.length)%y.length;F(l)}break}}function he(n){var l,s,p;d&&(J(n.target.value),!((s=(l=b.current)==null?void 0:l.popupPortal)!=null&&s.isEnter)&&g.current&&((p=b.current)==null||p.openPopup(g.current.parentElement)))}function be(){return G||(ue?w(ze,{size:16,weight:2}):d&&_?w(N,{size:16,color:V("colorTextGray")}):x?w(B,{size:16,color:V("colorTextGray")}):w(A,{size:16,color:V("colorTextGray")}))}return w(Ie,{ref:b,trigger:"click",equalWidth:"equal",menus:y,onMenuItemClick:(n,l)=>{X(l)},...j,portalOptions:{escToClose:!0,...j==null?void 0:j.portalOptions},children:Ee("div",{className:fe,style:pe,css:[Fe,Ce,We],onKeyDown:ye,...se,children:[ne,w("input",{ref:g,css:_e,readOnly:!d,placeholder:te,value:de,className:ke({cud:!d}),onFocus:ve,onBlur:ge,onChange:he}),be()]})})});try{K.displayName="Select",K.__docgenInfo={description:"",displayName:"Select",props:{}}}catch{}export{A as C,K as S,B as a,N as b};
