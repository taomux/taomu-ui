import{l as fe,c as Lt,j as Ve,a as ce,f as Bt}from"./mini-scrollbar-DnfR8E9z.js";import{R as _,r as Qe}from"./index-D4lIrffr.js";import{u as Nt,a as qt,c as Ot}from"./use-taomu-classname-CR-sgA-2.js";var ve=e=>e.type==="checkbox",le=e=>e instanceof Date,P=e=>e==null;const dt=e=>typeof e=="object";var B=e=>!P(e)&&!Array.isArray(e)&&dt(e)&&!le(e),ft=e=>B(e)&&e.target?ve(e.target)?e.target.checked:e.target.value:e,Tt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ct=(e,s)=>e.has(Tt(s)),Mt=e=>{const s=e.constructor&&e.constructor.prototype;return B(s)&&s.hasOwnProperty("isPrototypeOf")},Ne=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function O(e){let s;const t=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(!(Ne&&(e instanceof Blob||a))&&(t||B(e)))if(s=t?[]:{},!t&&!Mt(e))s=e;else for(const n in e)e.hasOwnProperty(n)&&(s[n]=O(e[n]));else return e;return s}var De=e=>/^\w*$/.test(e),L=e=>e===void 0,qe=e=>Array.isArray(e)?e.filter(Boolean):[],Oe=e=>qe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,s,t)=>{if(!s||!B(e))return t;const a=(De(s)?[s]:Oe(s)).reduce((n,l)=>P(n)?n:n[l],e);return L(a)||a===e?L(e[s])?t:e[s]:a},G=e=>typeof e=="boolean",E=(e,s,t)=>{let a=-1;const n=De(s)?[s]:Oe(s),l=n.length,d=l-1;for(;++a<l;){const f=n[a];let b=t;if(a!==d){const k=e[f];b=B(k)||Array.isArray(k)?k:isNaN(+n[a+1])?{}:[]}if(f==="__proto__"||f==="constructor"||f==="prototype")return;e[f]=b,e=e[f]}};const Fe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},J={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},re={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},yt=_.createContext(null);yt.displayName="HookFormContext";const Te=()=>_.useContext(yt);var mt=(e,s,t,a=!0)=>{const n={defaultValues:s._defaultValues};for(const l in e)Object.defineProperty(n,l,{get:()=>{const d=l;return s._proxyFormState[d]!==J.all&&(s._proxyFormState[d]=!a||J.all),t&&(t[d]=!0),e[d]}});return n};const Me=typeof window<"u"?Qe.useLayoutEffect:Qe.useEffect;function Ut(e){const s=Te(),{control:t=s.control,disabled:a,name:n,exact:l}=e||{},[d,f]=_.useState(t._formState),b=_.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Me(()=>t._subscribe({name:n,formState:b.current,exact:l,callback:k=>{!a&&f({...t._formState,...k})}}),[n,a,l]),_.useEffect(()=>{b.current.isValid&&t._setValid(!0)},[t]),_.useMemo(()=>mt(d,t,b.current,!1),[d,t])}var Z=e=>typeof e=="string",gt=(e,s,t,a,n)=>Z(e)?(a&&s.watch.add(e),y(t,e,n)):Array.isArray(e)?e.map(l=>(a&&s.watch.add(l),y(t,l))):(a&&(s.watchAll=!0),t);function It(e){const s=Te(),{control:t=s.control,name:a,defaultValue:n,disabled:l,exact:d}=e||{},f=_.useRef(n),[b,k]=_.useState(t._getWatch(a,f.current));return Me(()=>t._subscribe({name:a,formState:{values:!0},exact:d,callback:x=>!l&&k(gt(a,t._names,x.values||t._formValues,!1,f.current))}),[a,t,l,d]),_.useEffect(()=>t._removeUnmounted()),b}function Pt(e){const s=Te(),{name:t,disabled:a,control:n=s.control,shouldUnregister:l}=e,d=ct(n._names.array,t),f=It({control:n,name:t,defaultValue:y(n._formValues,t,y(n._defaultValues,t,e.defaultValue)),exact:!0}),b=Ut({control:n,name:t,exact:!0}),k=_.useRef(e),x=_.useRef(n.register(t,{...e.rules,value:f,...G(e.disabled)?{disabled:e.disabled}:{}})),w=_.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(b.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(b.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(b.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(b.validatingFields,t)},error:{enumerable:!0,get:()=>y(b.errors,t)}}),[b,t]),v=_.useCallback(C=>x.current.onChange({target:{value:ft(C),name:t},type:Fe.CHANGE}),[t]),Y=_.useCallback(()=>x.current.onBlur({target:{value:y(n._formValues,t),name:t},type:Fe.BLUR}),[t,n._formValues]),W=_.useCallback(C=>{const j=y(n._fields,t);j&&C&&(j._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:h=>C.setCustomValidity(h),reportValidity:()=>C.reportValidity()})},[n._fields,t]),S=_.useMemo(()=>({name:t,value:f,...G(a)||b.disabled?{disabled:b.disabled||a}:{},onChange:v,onBlur:Y,ref:W}),[t,a,b.disabled,v,Y,W,f]);return _.useEffect(()=>{const C=n._options.shouldUnregister||l;n.register(t,{...k.current.rules,...G(k.current.disabled)?{disabled:k.current.disabled}:{}});const j=(h,$)=>{const U=y(n._fields,h);U&&U._f&&(U._f.mount=$)};if(j(t,!0),C){const h=O(y(n._options.defaultValues,t));E(n._defaultValues,t,h),L(y(n._formValues,t))&&E(n._formValues,t,h)}return!d&&n.register(t),()=>{(d?C&&!n._state.action:C)?n.unregister(t):j(t,!1)}},[t,n,d,l]),_.useEffect(()=>{n._setDisabledField({disabled:a,name:t})},[a,t,n]),_.useMemo(()=>({field:S,formState:b,fieldState:w}),[S,b,w])}const Wt=e=>e.render(Pt(e));var Ht=(e,s,t,a,n)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[a]:n||!0}}:{},ge=e=>Array.isArray(e)?e:[e],Xe=()=>{let e=[];return{get observers(){return e},next:n=>{for(const l of e)l.next&&l.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(l=>l!==n)}}),unsubscribe:()=>{e=[]}}},Le=e=>P(e)||!dt(e);function ae(e,s,t=new WeakSet){if(Le(e)||Le(s))return e===s;if(le(e)&&le(s))return e.getTime()===s.getTime();const a=Object.keys(e),n=Object.keys(s);if(a.length!==n.length)return!1;if(t.has(e)||t.has(s))return!0;t.add(e),t.add(s);for(const l of a){const d=e[l];if(!n.includes(l))return!1;if(l!=="ref"){const f=s[l];if(le(d)&&le(f)||B(d)&&B(f)||Array.isArray(d)&&Array.isArray(f)?!ae(d,f,t):d!==f)return!1}}return!0}var H=e=>B(e)&&!Object.keys(e).length,Ue=e=>e.type==="file",Q=e=>typeof e=="function",xe=e=>{if(!Ne)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},ht=e=>e.type==="select-multiple",Ie=e=>e.type==="radio",$t=e=>Ie(e)||ve(e),Re=e=>xe(e)&&e.isConnected;function Gt(e,s){const t=s.slice(0,-1).length;let a=0;for(;a<t;)e=L(e)?a++:e[s[a++]];return e}function zt(e){for(const s in e)if(e.hasOwnProperty(s)&&!L(e[s]))return!1;return!0}function q(e,s){const t=Array.isArray(s)?s:De(s)?[s]:Oe(s),a=t.length===1?e:Gt(e,t),n=t.length-1,l=t[n];return a&&delete a[l],n!==0&&(B(a)&&H(a)||Array.isArray(a)&&zt(a))&&q(e,t.slice(0,-1)),e}var vt=e=>{for(const s in e)if(Q(e[s]))return!0;return!1};function pe(e,s={}){const t=Array.isArray(e);if(B(e)||t)for(const a in e)Array.isArray(e[a])||B(e[a])&&!vt(e[a])?(s[a]=Array.isArray(e[a])?[]:{},pe(e[a],s[a])):P(e[a])||(s[a]=!0);return s}function bt(e,s,t){const a=Array.isArray(e);if(B(e)||a)for(const n in e)Array.isArray(e[n])||B(e[n])&&!vt(e[n])?L(s)||Le(t[n])?t[n]=Array.isArray(e[n])?pe(e[n],[]):{...pe(e[n])}:bt(e[n],P(s)?{}:s[n],t[n]):t[n]=!ae(e[n],s[n]);return t}var ye=(e,s)=>bt(e,s,pe(s));const Ze={value:!1,isValid:!1},et={value:!0,isValid:!0};var Vt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!L(e[0].attributes.value)?L(e[0].value)||e[0].value===""?et:{value:e[0].value,isValid:!0}:et:Ze}return Ze},_t=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:a})=>L(e)?e:s?e===""?NaN:e&&+e:t&&Z(e)?new Date(e):a?a(e):e;const tt={isValid:!1,value:null};var Ft=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,tt):tt;function rt(e){const s=e.ref;return Ue(s)?s.files:Ie(s)?Ft(e.refs).value:ht(s)?[...s.selectedOptions].map(({value:t})=>t):ve(s)?Vt(e.refs).value:_t(L(s.value)?e.ref.value:s.value,e)}var Kt=(e,s,t,a)=>{const n={};for(const l of e){const d=y(s,l);d&&E(n,l,d._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:a}},Ae=e=>e instanceof RegExp,me=e=>L(e)?e:Ae(e)?e.source:B(e)?Ae(e.value)?e.value.source:e.value:e,st=e=>({isOnSubmit:!e||e===J.onSubmit,isOnBlur:e===J.onBlur,isOnChange:e===J.onChange,isOnAll:e===J.all,isOnTouch:e===J.onTouched});const it="AsyncFunction";var Yt=e=>!!e&&!!e.validate&&!!(Q(e.validate)&&e.validate.constructor.name===it||B(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===it)),jt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),at=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const he=(e,s,t,a)=>{for(const n of t||Object.keys(e)){const l=y(e,n);if(l){const{_f:d,...f}=l;if(d){if(d.refs&&d.refs[0]&&s(d.refs[0],n)&&!a)return!0;if(d.ref&&s(d.ref,d.name)&&!a)return!0;if(he(f,s))break}else if(B(f)&&he(f,s))break}}};function lt(e,s,t){const a=y(e,t);if(a||De(t))return{error:a,name:t};const n=t.split(".");for(;n.length;){const l=n.join("."),d=y(s,l),f=y(e,l);if(d&&!Array.isArray(d)&&t!==l)return{name:t};if(f&&f.type)return{name:l,error:f};if(f&&f.root&&f.root.type)return{name:`${l}.root`,error:f.root};n.pop()}return{name:t}}var Jt=(e,s,t,a)=>{t(e);const{name:n,...l}=e;return H(l)||Object.keys(l).length>=Object.keys(s).length||Object.keys(l).find(d=>s[d]===(!a||J.all))},Qt=(e,s,t)=>!e||!s||e===s||ge(e).some(a=>a&&(t?a===s:a.startsWith(s)||s.startsWith(a))),Xt=(e,s,t,a,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(s||e):(t?a.isOnBlur:n.isOnBlur)?!e:(t?a.isOnChange:n.isOnChange)?e:!0,Zt=(e,s)=>!qe(y(e,s)).length&&q(e,s),er=(e,s,t)=>{const a=ge(y(e,t));return E(a,"root",s[t]),E(e,t,a),e},_e=e=>Z(e);function nt(e,s,t="validate"){if(_e(e)||Array.isArray(e)&&e.every(_e)||G(e)&&!e)return{type:t,message:_e(e)?e:"",ref:s}}var oe=e=>B(e)&&!Ae(e)?e:{value:e,message:""},ut=async(e,s,t,a,n,l)=>{const{ref:d,refs:f,required:b,maxLength:k,minLength:x,min:w,max:v,pattern:Y,validate:W,name:S,valueAsNumber:C,mount:j}=e._f,h=y(t,S);if(!j||s.has(S))return{};const $=f?f[0]:d,U=V=>{n&&$.reportValidity&&($.setCustomValidity(G(V)?"":V||""),$.reportValidity())},R={},ne=Ie(d),X=ve(d),de=ne||X,T=(C||Ue(d))&&L(d.value)&&L(h)||xe(d)&&d.value===""||h===""||Array.isArray(h)&&!h.length,ee=Ht.bind(null,S,a,R),z=(V,F,A,M=re.maxLength,N=re.minLength)=>{const I=V?F:A;R[S]={type:V?M:N,message:I,ref:d,...ee(V?M:N,I)}};if(l?!Array.isArray(h)||!h.length:b&&(!de&&(T||P(h))||G(h)&&!h||X&&!Vt(f).isValid||ne&&!Ft(f).isValid)){const{value:V,message:F}=_e(b)?{value:!!b,message:b}:oe(b);if(V&&(R[S]={type:re.required,message:F,ref:$,...ee(re.required,F)},!a))return U(F),R}if(!T&&(!P(w)||!P(v))){let V,F;const A=oe(v),M=oe(w);if(!P(h)&&!isNaN(h)){const N=d.valueAsNumber||h&&+h;P(A.value)||(V=N>A.value),P(M.value)||(F=N<M.value)}else{const N=d.valueAsDate||new Date(h),I=ue=>new Date(new Date().toDateString()+" "+ue),te=d.type=="time",se=d.type=="week";Z(A.value)&&h&&(V=te?I(h)>I(A.value):se?h>A.value:N>new Date(A.value)),Z(M.value)&&h&&(F=te?I(h)<I(M.value):se?h<M.value:N<new Date(M.value))}if((V||F)&&(z(!!V,A.message,M.message,re.max,re.min),!a))return U(R[S].message),R}if((k||x)&&!T&&(Z(h)||l&&Array.isArray(h))){const V=oe(k),F=oe(x),A=!P(V.value)&&h.length>+V.value,M=!P(F.value)&&h.length<+F.value;if((A||M)&&(z(A,V.message,F.message),!a))return U(R[S].message),R}if(Y&&!T&&Z(h)){const{value:V,message:F}=oe(Y);if(Ae(V)&&!h.match(V)&&(R[S]={type:re.pattern,message:F,ref:d,...ee(re.pattern,F)},!a))return U(F),R}if(W){if(Q(W)){const V=await W(h,t),F=nt(V,$);if(F&&(R[S]={...F,...ee(re.validate,F.message)},!a))return U(F.message),R}else if(B(W)){let V={};for(const F in W){if(!H(V)&&!a)break;const A=nt(await W[F](h,t),$,F);A&&(V={...A,...ee(F,A.message)},U(A.message),a&&(R[S]=V))}if(!H(V)&&(R[S]={ref:$,...V},!a))return R}}return U(!0),R};const tr={mode:J.onSubmit,reValidateMode:J.onChange,shouldFocusError:!0};function rr(e={}){let s={...tr,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Q(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},a={},n=B(s.defaultValues)||B(s.values)?O(s.defaultValues||s.values)||{}:{},l=s.shouldUnregister?{}:O(n),d={action:!1,mount:!1,watch:!1},f={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},b,k=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let w={...x};const v={array:Xe(),state:Xe()},Y=s.criteriaMode===J.all,W=r=>i=>{clearTimeout(k),k=setTimeout(r,i)},S=async r=>{if(!s.disabled&&(x.isValid||w.isValid||r)){const i=s.resolver?H((await X()).errors):await T(a,!0);i!==t.isValid&&v.state.next({isValid:i})}},C=(r,i)=>{!s.disabled&&(x.isValidating||x.validatingFields||w.isValidating||w.validatingFields)&&((r||Array.from(f.mount)).forEach(u=>{u&&(i?E(t.validatingFields,u,i):q(t.validatingFields,u))}),v.state.next({validatingFields:t.validatingFields,isValidating:!H(t.validatingFields)}))},j=(r,i=[],u,m,c=!0,o=!0)=>{if(m&&u&&!s.disabled){if(d.action=!0,o&&Array.isArray(y(a,r))){const g=u(y(a,r),m.argA,m.argB);c&&E(a,r,g)}if(o&&Array.isArray(y(t.errors,r))){const g=u(y(t.errors,r),m.argA,m.argB);c&&E(t.errors,r,g),Zt(t.errors,r)}if((x.touchedFields||w.touchedFields)&&o&&Array.isArray(y(t.touchedFields,r))){const g=u(y(t.touchedFields,r),m.argA,m.argB);c&&E(t.touchedFields,r,g)}(x.dirtyFields||w.dirtyFields)&&(t.dirtyFields=ye(n,l)),v.state.next({name:r,isDirty:z(r,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else E(l,r,i)},h=(r,i)=>{E(t.errors,r,i),v.state.next({errors:t.errors})},$=r=>{t.errors=r,v.state.next({errors:t.errors,isValid:!1})},U=(r,i,u,m)=>{const c=y(a,r);if(c){const o=y(l,r,L(u)?y(n,r):u);L(o)||m&&m.defaultChecked||i?E(l,r,i?o:rt(c._f)):A(r,o),d.mount&&S()}},R=(r,i,u,m,c)=>{let o=!1,g=!1;const p={name:r};if(!s.disabled){if(!u||m){(x.isDirty||w.isDirty)&&(g=t.isDirty,t.isDirty=p.isDirty=z(),o=g!==p.isDirty);const D=ae(y(n,r),i);g=!!y(t.dirtyFields,r),D?q(t.dirtyFields,r):E(t.dirtyFields,r,!0),p.dirtyFields=t.dirtyFields,o=o||(x.dirtyFields||w.dirtyFields)&&g!==!D}if(u){const D=y(t.touchedFields,r);D||(E(t.touchedFields,r,u),p.touchedFields=t.touchedFields,o=o||(x.touchedFields||w.touchedFields)&&D!==u)}o&&c&&v.state.next(p)}return o?p:{}},ne=(r,i,u,m)=>{const c=y(t.errors,r),o=(x.isValid||w.isValid)&&G(i)&&t.isValid!==i;if(s.delayError&&u?(b=W(()=>h(r,u)),b(s.delayError)):(clearTimeout(k),b=null,u?E(t.errors,r,u):q(t.errors,r)),(u?!ae(c,u):c)||!H(m)||o){const g={...m,...o&&G(i)?{isValid:i}:{},errors:t.errors,name:r};t={...t,...g},v.state.next(g)}},X=async r=>{C(r,!0);const i=await s.resolver(l,s.context,Kt(r||f.mount,a,s.criteriaMode,s.shouldUseNativeValidation));return C(r),i},de=async r=>{const{errors:i}=await X(r);if(r)for(const u of r){const m=y(i,u);m?E(t.errors,u,m):q(t.errors,u)}else t.errors=i;return i},T=async(r,i,u={valid:!0})=>{for(const m in r){const c=r[m];if(c){const{_f:o,...g}=c;if(o){const p=f.array.has(o.name),D=c._f&&Yt(c._f);D&&x.validatingFields&&C([m],!0);const K=await ut(c,f.disabled,l,Y,s.shouldUseNativeValidation&&!i,p);if(D&&x.validatingFields&&C([m]),K[o.name]&&(u.valid=!1,i))break;!i&&(y(K,o.name)?p?er(t.errors,K,o.name):E(t.errors,o.name,K[o.name]):q(t.errors,o.name))}!H(g)&&await T(g,i,u)}}return u.valid},ee=()=>{for(const r of f.unMount){const i=y(a,r);i&&(i._f.refs?i._f.refs.every(u=>!Re(u)):!Re(i._f.ref))&&Ee(r)}f.unMount=new Set},z=(r,i)=>!s.disabled&&(r&&i&&E(l,r,i),!ae(ue(),n)),V=(r,i,u)=>gt(r,f,{...d.mount?l:L(i)?n:Z(r)?{[r]:i}:i},u,i),F=r=>qe(y(d.mount?l:n,r,s.shouldUnregister?y(n,r,[]):[])),A=(r,i,u={})=>{const m=y(a,r);let c=i;if(m){const o=m._f;o&&(!o.disabled&&E(l,r,_t(i,o)),c=xe(o.ref)&&P(i)?"":i,ht(o.ref)?[...o.ref.options].forEach(g=>g.selected=c.includes(g.value)):o.refs?ve(o.ref)?o.refs.forEach(g=>{(!g.defaultChecked||!g.disabled)&&(Array.isArray(c)?g.checked=!!c.find(p=>p===g.value):g.checked=c===g.value||!!c)}):o.refs.forEach(g=>g.checked=g.value===c):Ue(o.ref)?o.ref.value="":(o.ref.value=c,o.ref.type||v.state.next({name:r,values:O(l)})))}(u.shouldDirty||u.shouldTouch)&&R(r,c,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&se(r)},M=(r,i,u)=>{for(const m in i){if(!i.hasOwnProperty(m))return;const c=i[m],o=r+"."+m,g=y(a,o);(f.array.has(r)||B(c)||g&&!g._f)&&!le(c)?M(o,c,u):A(o,c,u)}},N=(r,i,u={})=>{const m=y(a,r),c=f.array.has(r),o=O(i);E(l,r,o),c?(v.array.next({name:r,values:O(l)}),(x.isDirty||x.dirtyFields||w.isDirty||w.dirtyFields)&&u.shouldDirty&&v.state.next({name:r,dirtyFields:ye(n,l),isDirty:z(r,o)})):m&&!m._f&&!P(o)?M(r,o,u):A(r,o,u),at(r,f)&&v.state.next({...t}),v.state.next({name:d.mount?r:void 0,values:O(l)})},I=async r=>{d.mount=!0;const i=r.target;let u=i.name,m=!0;const c=y(a,u),o=D=>{m=Number.isNaN(D)||le(D)&&isNaN(D.getTime())||ae(D,y(l,u,D))},g=st(s.mode),p=st(s.reValidateMode);if(c){let D,K;const be=i.type?rt(c._f):ft(r),ie=r.type===Fe.BLUR||r.type===Fe.FOCUS_OUT,St=!jt(c._f)&&!s.resolver&&!y(t.errors,u)&&!c._f.deps||Xt(ie,y(t.touchedFields,u),t.isSubmitted,p,g),Se=at(u,f,ie);E(l,u,be),ie?(c._f.onBlur&&c._f.onBlur(r),b&&b(0)):c._f.onChange&&c._f.onChange(r);const ke=R(u,be,ie),kt=!H(ke)||Se;if(!ie&&v.state.next({name:u,type:r.type,values:O(l)}),St)return(x.isValid||w.isValid)&&(s.mode==="onBlur"?ie&&S():ie||S()),kt&&v.state.next({name:u,...Se?{}:ke});if(!ie&&Se&&v.state.next({...t}),s.resolver){const{errors:je}=await X([u]);if(o(be),m){const Rt=lt(t.errors,a,u),Je=lt(je,a,Rt.name||u);D=Je.error,u=Je.name,K=H(je)}}else C([u],!0),D=(await ut(c,f.disabled,l,Y,s.shouldUseNativeValidation))[u],C([u]),o(be),m&&(D?K=!1:(x.isValid||w.isValid)&&(K=await T(a,!0)));m&&(c._f.deps&&se(c._f.deps),ne(u,K,D,ke))}},te=(r,i)=>{if(y(t.errors,i)&&r.focus)return r.focus(),1},se=async(r,i={})=>{let u,m;const c=ge(r);if(s.resolver){const o=await de(L(r)?r:c);u=H(o),m=r?!c.some(g=>y(o,g)):u}else r?(m=(await Promise.all(c.map(async o=>{const g=y(a,o);return await T(g&&g._f?{[o]:g}:g)}))).every(Boolean),!(!m&&!t.isValid)&&S()):m=u=await T(a);return v.state.next({...!Z(r)||(x.isValid||w.isValid)&&u!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:u}:{},errors:t.errors}),i.shouldFocus&&!m&&he(a,te,r?c:f.mount),m},ue=r=>{const i={...d.mount?l:n};return L(r)?i:Z(r)?y(i,r):r.map(u=>y(i,u))},Pe=(r,i)=>({invalid:!!y((i||t).errors,r),isDirty:!!y((i||t).dirtyFields,r),error:y((i||t).errors,r),isValidating:!!y(t.validatingFields,r),isTouched:!!y((i||t).touchedFields,r)}),xt=r=>{r&&ge(r).forEach(i=>q(t.errors,i)),v.state.next({errors:r?t.errors:{}})},We=(r,i,u)=>{const m=(y(a,r,{_f:{}})._f||{}).ref,c=y(t.errors,r)||{},{ref:o,message:g,type:p,...D}=c;E(t.errors,r,{...D,...i,ref:m}),v.state.next({name:r,errors:t.errors,isValid:!1}),u&&u.shouldFocus&&m&&m.focus&&m.focus()},pt=(r,i)=>Q(r)?v.state.subscribe({next:u=>r(V(void 0,i),u)}):V(r,i,!0),He=r=>v.state.subscribe({next:i=>{Qt(r.name,i.name,r.exact)&&Jt(i,r.formState||x,Ct,r.reRenderRoot)&&r.callback({values:{...l},...t,...i})}}).unsubscribe,At=r=>(d.mount=!0,w={...w,...r.formState},He({...r,formState:w})),Ee=(r,i={})=>{for(const u of r?ge(r):f.mount)f.mount.delete(u),f.array.delete(u),i.keepValue||(q(a,u),q(l,u)),!i.keepError&&q(t.errors,u),!i.keepDirty&&q(t.dirtyFields,u),!i.keepTouched&&q(t.touchedFields,u),!i.keepIsValidating&&q(t.validatingFields,u),!s.shouldUnregister&&!i.keepDefaultValue&&q(n,u);v.state.next({values:O(l)}),v.state.next({...t,...i.keepDirty?{isDirty:z()}:{}}),!i.keepIsValid&&S()},$e=({disabled:r,name:i})=>{(G(r)&&d.mount||r||f.disabled.has(i))&&(r?f.disabled.add(i):f.disabled.delete(i))},we=(r,i={})=>{let u=y(a,r);const m=G(i.disabled)||G(s.disabled);return E(a,r,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:r}},name:r,mount:!0,...i}}),f.mount.add(r),u?$e({disabled:G(i.disabled)?i.disabled:s.disabled,name:r}):U(r,!0,i.value),{...m?{disabled:i.disabled||s.disabled}:{},...s.progressive?{required:!!i.required,min:me(i.min),max:me(i.max),minLength:me(i.minLength),maxLength:me(i.maxLength),pattern:me(i.pattern)}:{},name:r,onChange:I,onBlur:I,ref:c=>{if(c){we(r,i),u=y(a,r);const o=L(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,g=$t(o),p=u._f.refs||[];if(g?p.find(D=>D===o):o===u._f.ref)return;E(a,r,{_f:{...u._f,...g?{refs:[...p.filter(Re),o,...Array.isArray(y(n,r))?[{}]:[]],ref:{type:o.type,name:r}}:{ref:o}}}),U(r,!1,void 0,o)}else u=y(a,r,{}),u._f&&(u._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(ct(f.array,r)&&d.action)&&f.unMount.add(r)}}},Ce=()=>s.shouldFocusError&&he(a,te,f.mount),Dt=r=>{G(r)&&(v.state.next({disabled:r}),he(a,(i,u)=>{const m=y(a,u);m&&(i.disabled=m._f.disabled||r,Array.isArray(m._f.refs)&&m._f.refs.forEach(c=>{c.disabled=m._f.disabled||r}))},0,!1))},Ge=(r,i)=>async u=>{let m;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let c=O(l);if(v.state.next({isSubmitting:!0}),s.resolver){const{errors:o,values:g}=await X();t.errors=o,c=O(g)}else await T(a);if(f.disabled.size)for(const o of f.disabled)q(c,o);if(q(t.errors,"root"),H(t.errors)){v.state.next({errors:{}});try{await r(c,u)}catch(o){m=o}}else i&&await i({...t.errors},u),Ce(),setTimeout(Ce);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:H(t.errors)&&!m,submitCount:t.submitCount+1,errors:t.errors}),m)throw m},Et=(r,i={})=>{y(a,r)&&(L(i.defaultValue)?N(r,O(y(n,r))):(N(r,i.defaultValue),E(n,r,O(i.defaultValue))),i.keepTouched||q(t.touchedFields,r),i.keepDirty||(q(t.dirtyFields,r),t.isDirty=i.defaultValue?z(r,O(y(n,r))):z()),i.keepError||(q(t.errors,r),x.isValid&&S()),v.state.next({...t}))},ze=(r,i={})=>{const u=r?O(r):n,m=O(u),c=H(r),o=c?n:m;if(i.keepDefaultValues||(n=u),!i.keepValues){if(i.keepDirtyValues){const g=new Set([...f.mount,...Object.keys(ye(n,l))]);for(const p of Array.from(g))y(t.dirtyFields,p)?E(o,p,y(l,p)):N(p,y(o,p))}else{if(Ne&&L(r))for(const g of f.mount){const p=y(a,g);if(p&&p._f){const D=Array.isArray(p._f.refs)?p._f.refs[0]:p._f.ref;if(xe(D)){const K=D.closest("form");if(K){K.reset();break}}}}if(i.keepFieldsRef)for(const g of f.mount)N(g,y(o,g));else a={}}l=s.shouldUnregister?i.keepDefaultValues?O(n):{}:O(o),v.array.next({values:{...o}}),v.state.next({values:{...o}})}f={mount:i.keepDirtyValues?f.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!x.isValid||!!i.keepIsValid||!!i.keepDirtyValues,d.watch=!!s.shouldUnregister,v.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:c?!1:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!ae(r,n)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:c?{}:i.keepDirtyValues?i.keepDefaultValues&&l?ye(n,l):t.dirtyFields:i.keepDefaultValues&&r?ye(n,r):i.keepDirty?t.dirtyFields:{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ke=(r,i)=>ze(Q(r)?r(l):r,i),wt=(r,i={})=>{const u=y(a,r),m=u&&u._f;if(m){const c=m.refs?m.refs[0]:m.ref;c.focus&&(c.focus(),i.shouldSelect&&Q(c.select)&&c.select())}},Ct=r=>{t={...t,...r}},Ye={control:{register:we,unregister:Ee,getFieldState:Pe,handleSubmit:Ge,setError:We,_subscribe:He,_runSchema:X,_focusError:Ce,_getWatch:V,_getDirty:z,_setValid:S,_setFieldArray:j,_setDisabledField:$e,_setErrors:$,_getFieldArray:F,_reset:ze,_resetDefaultValues:()=>Q(s.defaultValues)&&s.defaultValues().then(r=>{Ke(r,s.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:ee,_disableForm:Dt,_subjects:v,_proxyFormState:x,get _fields(){return a},get _formValues(){return l},get _state(){return d},set _state(r){d=r},get _defaultValues(){return n},get _names(){return f},set _names(r){f=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:At,trigger:se,register:we,handleSubmit:Ge,watch:pt,setValue:N,getValues:ue,reset:Ke,resetField:Et,clearErrors:xt,unregister:Ee,setError:We,setFocus:wt,getFieldState:Pe};return{...Ye,formControl:Ye}}function ur(e={}){const s=_.useRef(void 0),t=_.useRef(void 0),[a,n]=_.useState({isDirty:!1,isValidating:!1,isLoading:Q(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Q(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:a},e.defaultValues&&!Q(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:d,...f}=rr(e);s.current={...f,formState:a}}const l=s.current.control;return l._options=e,Me(()=>{const d=l._subscribe({formState:l._proxyFormState,callback:()=>n({...l._formState}),reRenderRoot:!0});return n(f=>({...f,isReady:!0})),l._formState.isReady=!0,d},[l]),_.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),_.useEffect(()=>{e.mode&&(l._options.mode=e.mode),e.reValidateMode&&(l._options.reValidateMode=e.reValidateMode)},[l,e.mode,e.reValidateMode]),_.useEffect(()=>{e.errors&&(l._setErrors(e.errors),l._focusError())},[l,e.errors]),_.useEffect(()=>{e.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,e.shouldUnregister]),_.useEffect(()=>{if(l._proxyFormState.isDirty){const d=l._getDirty();d!==a.isDirty&&l._subjects.state.next({isDirty:d})}},[l,a.isDirty]),_.useEffect(()=>{e.values&&!ae(e.values,t.current)?(l._reset(e.values,{keepFieldsRef:!0,...l._options.resetOptions}),t.current=e.values,n(d=>({...d}))):l._resetDefaultValues()},[l,e.values]),_.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),s.current.formState=mt(a,l),s.current}const sr=Lt`
  position: relative;
  margin-bottom: ${fe("formMarginBottom")};

  &.form-item-layout-horizontal {
    display: flex;
    align-items: center;
    gap: ${fe("formItemGap")};
    .form-item-label {
      flex: none;
      width: ${fe("formLabelWidth")};
      text-align: right;
    }
    .form-item-content {
      flex: 1;
      transform: translateY(1.5px);
    }
  }

  &.form-item-layout-inline {
    display: flex;
    align-items: center;
    gap: ${fe("formItemGap")};
    .form-item-label {
      margin-bottom: 2px;
    }
  }

  &.form-item-layout-vertical {
    display: flex;
    flex-direction: column;
    gap: ${fe("formItemGap")};
  }

  .fi-label-text {
    position: relative;
    .required-flag {
      position: absolute;
      top: -3px;
      left: -8px;
    }
  }

  .form-item-msg {
    position: absolute;
    display: flex;
    align-items: flex-end;
    position: absolute;
    left: 0;
    bottom: -18px;
  }
`,Be=_.createContext({});try{Be.displayName="FormContext",Be.__docgenInfo={description:"",displayName:"FormContext",props:{}}}catch{}const ot=({children:e,id:s,className:t,cssVars:a,style:n,name:l,label:d,marginBottom:f,layout:b,noStyle:k,labelWidth:x,colon:w=!0,useController:v=!0,extra:Y,extraGap:W=6,triggerOnChange:S=!0,required:C,...j})=>{const{formInstance:h,marginBottom:$,layout:U,labelWidth:R,triggerOnChange:ne}=_.useContext(Be);if(!h)throw new Error("formInstance is not exist");const X=Nt("form-item",`form-item-layout-${b||U}`,{"no-style":k},t),de=qt({formMarginBottom:f||$,formLabelWidth:x||R,...a},n),T=_.useMemo(()=>{if(l)return h.formState.errors[l]},[h.formState.errors[l]]);if(!e)return null;function ee(){return k?null:Ve("div",{className:"form-item-label",children:[Ve("span",{className:"fi-label-text",children:[!!(C&&d)&&ce("span",{className:"required-flag color-error",children:"*"}),d]}),d&&w&&ce("span",{className:"ml-2",children:":"})]})}function z(){return T?ce("div",{className:"form-item-msg color-error fs-12",children:(T==null?void 0:T.message)||"required!"}):null}function V(){if(!e)return;if(!l||!h)return e;const{onChange:F,...A}=e.props||{};l&&Object.assign(A,h.register(l,{required:C,...j})),T&&(A.status="error");function M(N,I){(S??ne)&&l&&(h==null||h.trigger(l));const te=F==null?void 0:F(N);return Bt(te)?te.finally(()=>I(N)):I(N)}return A.className=Ot("form-item-content-input",A.className),v?ce(Wt,{name:l,control:h.control,render:({field:{onChange:N,...I}})=>{const{onChange:te,...se}=A;return _.cloneElement(e,{...se,...I,onChange:ue=>M(ue,N)})}}):_.cloneElement(e,A)}return Ve("div",{id:s,className:X,style:de,css:sr,children:[ee(),Ve("div",{className:"form-item-content flex center-v",style:{gap:W},children:[V(),Y&&ce("div",{className:"form-item-extra flex-none flex center-v",style:{gap:W},children:Y}),z()]})]})};try{ot.displayName="FormItem",ot.__docgenInfo={description:"",displayName:"FormItem",props:{required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"string | ValidationRule<boolean>"}},min:{defaultValue:null,description:"",name:"min",required:!1,type:{name:"ValidationRule<string | number>"}},max:{defaultValue:null,description:"",name:"max",required:!1,type:{name:"ValidationRule<string | number>"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!1,type:{name:"ValidationRule<number>"}},minLength:{defaultValue:null,description:"",name:"minLength",required:!1,type:{name:"ValidationRule<number>"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"Validate<any, FieldValues> | Record<string, Validate<any, FieldValues>>"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},setValueAs:{defaultValue:null,description:"",name:"setValueAs",required:!1,type:{name:"((value: any) => any)"}},shouldUnregister:{defaultValue:null,description:"",name:"shouldUnregister",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((event: any) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((event: any) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},deps:{defaultValue:null,description:"",name:"deps",required:!1,type:{name:"string | string[]"}},pattern:{defaultValue:null,description:"",name:"pattern",required:!1,type:{name:"ValidationRule<RegExp>"}},valueAsNumber:{defaultValue:null,description:"",name:"valueAsNumber",required:!1,type:{name:"boolean"}},valueAsDate:{defaultValue:null,description:"",name:"valueAsDate",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},layout:{defaultValue:null,description:"布局方式",name:"layout",required:!1,type:{name:"enum",value:[{value:'"inline"'},{value:'"horizontal"'},{value:'"vertical"'}]}},marginBottom:{defaultValue:null,description:"底部边距",name:"marginBottom",required:!1,type:{name:"string | number"}},labelWidth:{defaultValue:null,description:"标签宽度",name:"labelWidth",required:!1,type:{name:"string | number"}},noStyle:{defaultValue:null,description:"无样式",name:"noStyle",required:!1,type:{name:"boolean"}},colon:{defaultValue:{value:"true"},description:"显示冒号 `:`",name:"colon",required:!1,type:{name:"boolean"}},useController:{defaultValue:{value:"true"},description:"是否使用状态控制器，默认为 `true`, 设为 `false` 可提高性能",name:"useController",required:!1,type:{name:"boolean"}},extra:{defaultValue:null,description:"额外的内容",name:"extra",required:!1,type:{name:"ReactNode"}},extraGap:{defaultValue:{value:"6"},description:"额外的内容的间距",name:"extraGap",required:!1,type:{name:"string | number"}},triggerOnChange:{defaultValue:{value:"true"},description:"变更时触发校验",name:"triggerOnChange",required:!1,type:{name:"boolean"}}}}}catch{}export{ot as F,Be as a,ur as u};
